{"version":3,"sources":["webpack:///./gesture.js","webpack:///webpack/bootstrap","webpack:///webpack/runtime/define property getters","webpack:///webpack/runtime/hasOwnProperty shorthand","webpack:///webpack/runtime/make namespace object","webpack:///webpack/startup"],"names":["Dispatcher","element","type","properties","event","Event","key","hasOwnProperty","value","dispatchEvent","Listener","recognizer","isListeningMouse","addEventListener","context","Object","create","contexts","set","button","start","mousemove","buttons","get","move","mouseup","end","buttonss","document","removeEventListener","Map","changedTouches","touch","identifier","cancel","Recognizer","dispatcher","point","startX","clientX","startY","clientY","points","t","Date","now","x","y","isTap","isPan","isPress","isFlick","handler","setTimeout","dispatch","dx","dy","isVertical","Math","abs","clearTimeout","filter","push","d","v","length","sqrt","velocity","enableGesture"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AAEA;AACA;AAEA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,IAAMA,UAAb;AACE,sBAAYC,OAAZ,EAAqB;AAAA;;AACnB,SAAKA,OAAL,GAAeA,OAAf;AACD;;AAHH;AAAA;AAAA,6BAIWC,IAJX,EAIiBC,UAJjB,EAI6B;AACzB,UAAIC,KAAK,GAAG,IAAIC,KAAJ,CAAUH,IAAV,CAAZ;;AACA,WAAK,IAAMI,GAAX,IAAkBH,UAAlB,EAA8B;AAC5B,YAAIA,UAAU,CAACI,cAAX,CAA0BD,GAA1B,CAAJ,EAAoC;AAClC,cAAME,KAAK,GAAGL,UAAU,CAACG,GAAD,CAAxB;AACAF,eAAK,CAACE,GAAD,CAAL,GAAaE,KAAb;A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","file":"main.js","sourcesContent":["// let element = document.documentElement;\n// let isListeningMouse = false;\n\n// listen => recognize => dispatch\n// new Listener(new Recognizer(dispatch))\n\n// document.addEventListener('mousedown', (event) => {\n//   // 按下哪个键\n//   console.log(event.button);\n\n//   let context = Object.create(null);\n//   contexts.set('mouse' + (1 << event.button), context);\n\n//   start(event, context);\n//   let mousemove = (event) => {\n//     // 掩码，二进制表示，0b0001左键按下\n//     // event.buttons=== 0b0001\n//     let button = 1;\n//     while (button <= event.buttons) {\n//       if (button & event.buttons) {\n//         // 鼠标中键和右键顺序不一致，需要调整\n//         let key;\n//         if (button === 2) key = 4;\n//         else if (button === 4) key = 2;\n//         else key = button;\n//         let context = contexts.get('mouse' + key);\n//         move(event, context);\n//       }\n//       button = button << 1;\n//     }\n//   };\n//   let mouseup = (event) => {\n//     console.log(event.button);\n//     let context = contexts.get('mouse' + (1 << event.button));\n//     end(event, context);\n//     contexts.delete('mouse' + (1 << event.button));\n//     if (event.buttons === 0) {\n//       document.removeEventListener('mousemove', mousemove);\n//       document.removeEventListener('mouseup', mouseup);\n//       isListeningMouse = false;\n//     }\n//   };\n//   if (!isListeningMouse) {\n//     document.addEventListener('mousemove', mousemove);\n//     document.addEventListener('mouseup', mouseup);\n//     isListeningMouse = true;\n//   }\n// });\n\n// let contexts = new Map();\n\n// document.addEventListener('touchstart', (event) => {\n//   for (let touch of event.changedTouches) {\n//     let context = Object.create(null);\n//     contexts.set(touch.identifier, context);\n//     start(touch, context);\n//   }\n// });\n// document.addEventListener('touchmove', (event) => {\n//   for (let touch of event.changedTouches) {\n//     let context = contexts.get(touch.identifier);\n//     move(touch, context);\n//   }\n// });\n// document.addEventListener('touchend', (event) => {\n//   for (let touch of event.changedTouches) {\n//     let context = contexts.get(touch.identifier);\n//     end(touch, context);\n//     contexts.delete(touch.identifier);\n//   }\n// });\n// document.addEventListener('touchcancel', (event) => {\n//   for (let touch of event.changedTouches) {\n//     let context = contexts.get(touch.identifier);\n//     cancel(touch, context);\n//   }\n// });\n\n// let handler;\n// let startX, startY;\n// let isPan = false,\n//   isTap = true,\n//   isPress = false;\n\n// let start = (point, context) => {\n//   // console.log('start', point.clientX, point.clientY);\n//   (context.startX = point.clientX), (context.startY = point.clientY);\n//   context.points = [\n//     {\n//       t: Date.now(),\n//       x: point.clientX,\n//       y: point.clientY,\n//     },\n//   ];\n//   context.isTap = true;\n//   context.isPan = false;\n//   context.isPress = false;\n//   context.handler = setTimeout(() => {\n//     context.isTap = false;\n//     context.isPan = false;\n//     context.isPress = true;\n//     context.handler = null;\n//     console.log('pressstart');\n//   }, 500);\n// };\n\n// let move = (point, context) => {\n//   let dx = point.clientX - context.startX,\n//     dy = point.clientY - context.startY;\n//   // 移动超过10px\n//   if (!context.isPan && dx ** 2 + dy ** 2 > 100) {\n//     context.isTap = false;\n//     context.isPan = true;\n//     context.isPress = false;\n//     clearTimeout(context.handler);\n//   }\n//   if (context.isPan) {\n//     console.log(dx, dy);\n//     console.log('pan');\n//   }\n//   context.points = context.points.filter((point) => Date.now() - point.t < 500);\n//   context.points.push({\n//     t: Date.now(),\n//     x: point.clientX,\n//     y: point.clientY,\n//   });\n//   // console.log('move', point.clientX, point.clientY);\n// };\n\n// let end = (point, context) => {\n//   if (context.isTap) {\n//     console.log('tap');\n//     dispatch('tap', {});\n//     clearTimeout(context.handler);\n//   }\n//   if (context.isPan) {\n//     console.log('paned');\n//   }\n//   if (context.isPress) {\n//     console.log('presseend');\n//   }\n//   context.points = context.points.filter((point) => Date.now() - point.t < 500);\n//   let d, v;\n//   if (!context.points.length) {\n//     v = 0;\n//   } else {\n//     // 移动的距离\n//     d = Math.sqrt(\n//       (point.clientX - context.points[0].x) ** 2 + (point.clientY - context.points[0].y) ** 2\n//     );\n//     // 速度\n//     v = d / (Date.now() - context.points[0].t);\n//     console.log(v);\n//   }\n//   // 像素每毫秒\n//   if (v > 1.5) {\n//     console.log('flick');\n//     context.isFlick = true;\n//   } else {\n//     context.isFlick = false;\n//   }\n//   // console.log('end', point.clientX, point.clientY);\n// };\n// let cancel = (point, context) => {\n//   clearTimeout(context.handler);\n//   // console.log('cancel', point.clientX, point.clientY);\n// };\n\n// function dispatch(type, properties) {\n//   let event = new CustomEvent(type);\n//   for (let name in properties) {\n//     event[name] = properties[name];\n//   }\n//   element.dispatchEvent(event);\n// }\nexport class Dispatcher {\n  constructor(element) {\n    this.element = element;\n  }\n  dispatch(type, properties) {\n    let event = new Event(type);\n    for (const key in properties) {\n      if (properties.hasOwnProperty(key)) {\n        const value = properties[key];\n        event[key] = value;\n      }\n    }\n    this.element.dispatchEvent(event);\n  }\n}\n\nexport class Listener {\n  constructor(element, recognizer) {\n    let isListeningMouse = false;\n    element.addEventListener('mousedown', (event) => {\n      let context = Object.create(null);\n      contexts.set('mouse' + (1 << event.button), context);\n      recognizer.start(event, context);\n      let mousemove = (event) => {\n        let button = 1;\n        while (button <= event.buttons) {\n          if (button & event.buttons) {\n            let key;\n            if (button === 2) {\n              key = 4;\n            } else if (button === 4) {\n              key = 2;\n            } else {\n              key = button;\n            }\n            let context = contexts.get('mouse' + key);\n            recognizer.move(event, context);\n          }\n          button = button << 1;\n        }\n      };\n      let mouseup = (event) => {\n        let context = contexts.get('mouse' + (1 << event.button));\n        recognizer.end(event, context);\n        contexts.delete('mouse' + (1 << event.button));\n        if (event.buttonss === 0) {\n          document.removeEventListener('mousemove', mousemove);\n          document.removeEventListener('mouseup', mouseup);\n          isListeningMouse = false;\n        }\n      };\n      if (!isListeningMouse) {\n        document.addEventListener('mousemove', mousemove);\n        document.addEventListener('mouseup', mouseup);\n        isListeningMouse = true;\n      }\n    });\n\n    let contexts = new Map();\n    element.addEventListener('touchstart', (event) => {\n      for (const touch of event.changedTouches) {\n        let context = Object.create(null);\n        contexts.set(touch.identifier, context);\n        recognizer.start(touch, context);\n      }\n    });\n    element.addEventListener('touchmove', (event) => {\n      for (const touch of event.changedTouches) {\n        let context = contexts.get(touch.identifier);\n        recognizer.move(touch, context);\n      }\n    });\n    element.addEventListener('touchend', (event) => {\n      for (const touch of event.changedTouches) {\n        let context = contexts.get(touch.identifier);\n        recognizer.end(touch, context);\n        contexts.delete(touch.identifier);\n      }\n    });\n    element.addEventListener('touchcancel', (event) => {\n      for (const touch of event.changedTouches) {\n        let context = contexts.get(touch.identifier);\n        recognizer.cancel(touch, context);\n        contexts.delete(touch.identifier);\n      }\n    });\n  }\n}\n\nexport class Recognizer {\n  constructor(dispatcher) {\n    this.dispatcher = dispatcher;\n  }\n  start(point, context) {\n    (context.startX = point.clientX), (context.startY = point.clientY);\n    context.points = [\n      {\n        t: Date.now(),\n        x: point.clientX,\n        y: point.clientY,\n      },\n    ];\n    context.isTap = true;\n    context.isPan = false;\n    context.isPress = false;\n    context.isFlick = false;\n    // 判断press超过500毫秒\n    context.handler = setTimeout(() => {\n      context.isTap = false;\n      context.isPan = false;\n      context.isPress = true;\n      context.handler = null;\n      this.dispatcher.dispatch('press', {});\n    }, 500);\n  }\n  move(point, context) {\n    let dx = point.clientX - context.startX,\n      dy = point.clientY - context.startY;\n    // 移动超过10px 取消press监听\n    if (!context.isPan && dx ** 2 + dy ** 2 > 100) {\n      context.isTap = false;\n      context.isPress = false;\n      context.isPan = true;\n      context.isVertical = Math.abs(dx) < Math.abs(dy);\n      this.dispatcher.dispatch('panstart', {\n        startX: context.startX,\n        startY: context.startY,\n        clientX: point.clientX,\n        clientY: point.clientY,\n        isVertical: context.isVertical,\n      });\n      clearTimeout(context.handler);\n    }\n    if (context.isPan) {\n      //平移\n      this.dispatcher.dispatch('pan', {\n        startX: context.startX,\n        startY: context.startY,\n        clientX: point.clientX,\n        clientY: point.clientY,\n        isVertical: context.isVertical,\n      });\n    }\n\n    context.points = context.points.filter((point) => Date.now() - point.t < 500);\n    context.points.push({\n      t: Date.now(),\n      x: point.clientX,\n      y: point.clientY,\n    });\n  }\n  end(point, context) {\n    if (context.isTap) {\n      this.dispatcher.dispatch('tap', {});\n      clearTimeout(context.handler);\n    }\n    if (context.isPress) {\n      this.dispatcher.dispatch('pressend', {});\n    }\n    context.points = context.points.filter((point) => Date.now() - point.t < 500);\n    let d, v;\n    if (!context.points.length) {\n      v = 0;\n    } else {\n      d = Math.sqrt(\n        (point.clientX - context.points[0].x) ** 2 + (point.clientY - context.points[0].y) ** 2\n      );\n      v = d / (Date.now() - context.points[0].t);\n    }\n\n    if (v > 1.5) {\n      this.dispatcher.dispatch('flick', {\n        startX: context.startX,\n        startY: context.startY,\n        clientX: point.clientX,\n        clientY: point.clientY,\n        isVertical: context.isVertical,\n        isFlick: context.isFlick,\n        velocity: v,\n      });\n      context.isFlick = true;\n    } else {\n      context.isFlick = false;\n    }\n    if (context.isPan) {\n      this.dispatcher.dispatch('panend', {\n        startX: context.startX,\n        startY: context.startY,\n        clientX: point.clientX,\n        clientY: point.clientY,\n        isVertical: context.isVertical,\n        isFlick: context.isFlick,\n      });\n    }\n  }\n  cancel(point, context) {\n    clearTimeout(context.handler);\n    this.dispatcher.dispatch('cancel', {});\n  }\n}\n\nexport function enableGesture(element) {\n  new Listener(element, new Recognizer(new Dispatcher(element)));\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop)","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// startup\n// Load entry module\n__webpack_require__(\"./gesture.js\");\n// This entry module used 'exports' so it can't be inlined\n"],"sourceRoot":""}